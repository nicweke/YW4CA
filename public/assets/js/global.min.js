"use strict";function formButtonLoading(t){t.querySelector('button[type="submit"]').classList.add("button--is-loading")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t):"function"==typeof define&&define.amd?define([],e):t.LazyLoad=e(t)}("undefined"!=typeof global?global:window||global,function(t){function e(t,e){this.settings=r(o,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}"function"==typeof define&&define.amd&&(t=window);var o={src:"data-src",srcset:"data-srcset",selector:".lazyload",root:null,rootMargin:"0px",threshold:0},r=function s(){var t={},e=!1,o=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],o++);for(var n=function(o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e&&"[object Object]"===Object.prototype.toString.call(o[r])?t[r]=s(!0,t[r],o[r]):t[r]=o[r])};o<r;o++){var i=arguments[o];n(i)}return t};return e.prototype={init:function(){if(!t.IntersectionObserver)return void this.loadImages();var e=this,o={root:this.settings.root,rootMargin:this.settings.rootMargin,threshold:[this.settings.threshold]};this.observer=new IntersectionObserver(function(t){Array.prototype.forEach.call(t,function(t){if(t.isIntersecting){e.observer.unobserve(t.target);var o=t.target.getAttribute(e.settings.src),r=t.target.getAttribute(e.settings.srcset);"img"===t.target.tagName.toLowerCase()?(o&&(t.target.src=o),r&&(t.target.srcset=r)):t.target.style.backgroundImage="url("+o+")"}})},o),Array.prototype.forEach.call(this.images,function(t){e.observer.observe(t)})},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(this.settings){var t=this;Array.prototype.forEach.call(this.images,function(e){var o=e.getAttribute(t.settings.src),r=e.getAttribute(t.settings.srcset);"img"===e.tagName.toLowerCase()?(o&&(e.src=o),r&&(e.srcset=r)):e.style.backgroundImage="url('"+o+"')"})}},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},t.lazyload=function(t,o){return new e(t,o)},e}),window.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".hero-section__call-to-action form"),e=document.querySelectorAll(".subscribe-section__form form"),o=function(t){t.querySelector('.form__group input[type="email"]').disabled=!0,t.querySelector(".button").disabled=!0},r=function(t){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)};e.length&&e.forEach(function(t){t.addEventListener("submit",function(t){var e=this;t.preventDefault();var s=this.querySelector('.form__group input[type="email"]').value;if(r(s)){o(this);var n="";n="storyList"===this.dataset.formLocation?"subscribed via blog - list":"subscribed via blog - story";var i={workflow:"685198390",subscribers:[{email:s,tags:n}]},a=new Request("https://tide-feast.glitch.me/subscribers",{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(i)});fetch(a).then(function(){return document.querySelector(".subscribe-section").classList.add("subscribe-section--submitted")})}else this.querySelector("button").classList.add("button--error"),setTimeout(function(){e.querySelector("button").classList.remove("button--error")},600)})}),t&&t.addEventListener("submit",function(t){var e=this;t.preventDefault();var s=this.querySelector('.form__group input[type="email"]').value;if(r(s)){o(this);var n={workflow:"685198390",subscribers:[{email:s,tags:"subscribed via blog - header"}]},i=new Request("https://tide-feast.glitch.me/subscribers",{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(n)});fetch(i).then(function(){return e.parentNode.classList.add("hero-section__call-to-action--submitted")})}else this.querySelector("button").classList.add("button--error"),setTimeout(function(){e.querySelector("button").classList.remove("button--error")},600)})});